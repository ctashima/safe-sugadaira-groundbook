<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <!-- PWA/スタイル -->
  <link rel="manifest" href="./manifest.webmanifest"/>
  <link rel="stylesheet" href="./style.css"/>

  <!-- Favicon（任意：assets/icons/ に配置） -->
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16.png">
  <link rel="apple-touch-icon" href="assets/icons/favicon-180.png">
  <meta name="theme-color" content="#C62828" id="meta-theme-color">

  <title>SAFE菅平グラウンドマップ（試用版/3面）</title>

  <!-- テーマ初期化 + theme-color 切替（?theme=safe で赤系） -->
  <script>
  (function(){
    const isSafe = new URLSearchParams(location.search).get('theme') === 'safe';
    if (isSafe) document.documentElement.setAttribute('data-theme','safe');
    const meta = document.querySelector('meta[name="theme-color"]') || document.getElementById('meta-theme-color');
    if (meta) meta.setAttribute('content', isSafe ? '#C62828' : '#135389');
  })();
  </script>
</head>
<body>
<div class="container">

  <!-- ナビ（地図 & テーマ切替） -->
  <div class="navbar">
    <a class="btn" href="./map.html">地図表示へ</a>
    <a class="btn" href="?">標準テーマ</a>
    <a class="btn" href="?theme=safe">赤テーマ</a>
  </div>

  <h1>SAFE菅平グラウンドマップ（試用版/3面）</h1>

  <!-- 検索（テキスト一致フィルタ） -->
  <div class="search"><input id="q" placeholder="例：83番 / 所有者名 / ゾーン色 で検索…"></div>

  <!-- カードリスト -->
  <div id="grid" class="grid">
    <a class="card" href="./ground_G41.html">
      <div class="title">第41番グラウンド</div>
      <div class="small">桃　菅平国際ホテルベルニナ　車約 3分</div>
    </a>
    <a class="card" href="./ground_G83.html">
      <div class="title">第83番グラウンド</div>
      <div class="small">青　山光館　車約 4分</div>
    </a>
    <a class="card" href="./ground_G94.html">
      <div class="title">第94番グラウンド</div>
      <div class="small">桃　菅平国際ホテルベルニナ　車約 4分</div>
    </a>
  </div>

  <footer class="smallcopy">© 2025 SAFEプロジェクト</footer>
</div>

<!-- SW登録 + 検索ロジック -->
<script>
if('serviceWorker' in navigator) navigator.serviceWorker.register('./sw.js');
const q=document.getElementById('q'), grid=document.getElementById('grid');
q.addEventListener('input', ()=>{ const v=q.value.toLowerCase();
  [...grid.children].forEach(c=>{ c.style.display = c.textContent.toLowerCase().includes(v)?'':'none'; });
});
</script>
</body></html>